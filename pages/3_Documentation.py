import streamlit as st
from utils.translations import get_translation

def documentation_page():
    st.title("Документация по финансовой модели Кошелька Репутации")
    
    st.markdown("""
    ## Руководство по финансовой модели

    ### Ключевые метрики и механики расчета

    #### Объемы и обороты
    - **Общий объем трат (GMV)** = Активные пользователи × Средний чек × 2.5 транзакции в месяц
        - Средний чек в стандартном сценарии: 2,800₽
        - Отражает все транзакции пользователей в торговых точках
    
    - **Оборот программы лояльности** = GMV × Ставка кэшбэка (12% в стандартном сценарии)
        - Объем начисленных баллов лояльности
        - Например: при GMV = 1,000,000₽ и ставке 12%, оборот программы = 120,000₽ в баллах

    #### Механика баллов и сгорания
        - Баллы, которые пользователь подтвердил (claimed), конвертируются в токены и никогда не сгорают
        - Только неподтвержденные баллы могут сгореть:
            * Если пользователь не подтвердил баллы в течение 2 месяцев
            * Сгоревшие баллы возвращаются в систему и учитываются как доход платформы
    
    #### Доходы платформы
    - **Партнерский доход**:
        - Подписки торговых точек (базовая/премиум)
        - Комиссии за дополнительные сервисы:
            * 3% при обмене баллов
            * 4% при начислении вознаграждений
    
    #### Расходы
    - **Фонд оплаты труда (ФОТ)**:
        - Первые 6 месяцев: покрывается из первоначальных инвестиций
        - 7-12 месяцы: 2,500,000₽/мес
        - После 12 месяцев: 3,500,000₽/мес

    - **Маркетинговые расходы**:
        - Первые 6 месяцы: фиксированный бюджет 200,000₽/мес
        - После 6 месяцев: 5% от выручки
        - Эффективность: 200 новых пользователей на 100,000₽

    - **Инфраструктура**: 
        - Базовые затраты 200,000₽/мес
        - Масштабирование при росте пользователей

    #### ROI и финансовые показатели
    - **Расчет ROI** = (Суммарная операционная прибыль / Суммарные операционные расходы) × 100%
        - Операционные расходы включают:
            * ФОТ
            * Маркетинг
            * Инфраструктуру
        - Не включают первоначальные инвестиции, так как модель оценивает операционную эффективность

    #### Налогообложение
    - **НДС (20%)**:
        - Начисляется на все виды выручки
        - Включает комиссии, подписки и доход от сгоревших баллов
    
    - **Налог на прибыль (20%)**:
        - База = Выручка - НДС - Операционные расходы
        - Включает доход от сгоревших баллов
        - Особенности учета сгоревших баллов:
            * Баллы становятся доходом только после истечения периода подтверждения (по умолчанию 2 месяца)
            * Доход от сгоревших баллов = Неподтвержденные баллы × Процент сгорания
            * Полностью включается в налогооблагаемую базу

    ### Сценарии и их особенности

    #### Стандартный сценарий
    - Начальные пользователи: 1,000
    - Конверсия в активных: 30%
    - Темпы роста: 20% (1й год), 15% (2й год)
    - Средний чек: 2,800₽
    - Ставка кэшбэка: 12%

    #### Пессимистичный сценарий
    - Начальные пользователи: 800
    - Конверсия в активных: 30%
    - Темпы роста: 15% (1й год), 10% (2й год)
    - Средний чек: 2,500₽
    - Ставка кэшбэка: 15%

    #### Оптимистичный сценарий
    - Начальные пользователи: 1,200
    - Конверсия в активных: 45%
    - Темпы роста: 25% (1й год), 15% (2й год)
    - Средний чек: 3,200₽
    - Ставка кэшбэка: 17%

    ### Управление моделью
    - Все параметры настраиваются в разделе Parameter Management
    - Сравнение сценариев доступно в разделе Scenario Analysis
    - Поддерживается создание и сохранение пользовательских сценариев
    """)

if __name__ == "__main__":
    documentation_page()