import streamlit as st
from utils.translations import get_translation

def documentation_page():
    st.title("Документация по финансовой модели")
    
    st.markdown("""
    ## Основные компоненты расчета
    
    ### Базовые параметры начисления
    - Процент кэшбэка: 15% от суммы покупки (настраиваемый параметр)
    - Процент использования баллов: 70% от начисленных баллов (настраиваемый параметр)
    
    ### Расчет выручки
    1. Кэшбэк = Оборот × Процент кэшбэка
    2. Используемые баллы = Кэшбэк × Процент использования баллов
    3. Комиссионная выручка = (Используемые баллы × Комиссия обмена) + (Начисленный кэшбэк × Комиссия начисления)
    4. Выручка от подписок = Количество подписчиков × Стоимость подписки
    5. Общая выручка = Комиссионная выручка + Выручка от подписок + Рекламная выручка
    
    ### Расчет расходов
    1. Ежемесячные расходы = ФОТ + Маркетинг + Инфраструктура
    2. Темпы роста применяются ежемесячно по формуле сложного роста
    3. Общие расходы = Сумма всех категорий расходов
    
    ### Расчет прибыли
    - Ежемесячная прибыль = Общая выручка - Общие расходы
    - ROI = (Прибыль / Общие расходы) × 100
    """)
    
    st.markdown("""
    ## История изменений модели
    
    ### Обновление от 17.12.2024
    
    #### Изменения в расчете маркетинговых расходов
    - Внедрена двухэтапная система расчета:
      - Первые 6 месяцев: фиксированные расходы 200,000 руб./мес. из начальных инвестиций
      - С 7-го месяца: процент от выручки (настраиваемый, по умолчанию 5%)
    - Эффективность маркетинга различается по сценариям:
      - Пессимистичный: 100 пользователей на 100К расходов, 15% маркетинговых расходов от выручки
      - Стандартный: 250 пользователей на 100К расходов, 5% маркетинговых расходов
      - Оптимистичный: 300 пользователей на 100К расходов, 5% маркетинговых расходов
    
    #### Изменения в сценариях
    - Обновлены базовые параметры роста:
      - Снижен органический рост в стандартном сценарии (8% первый год, 4% второй год)
      - Снижен органический рост в оптимистичном сценарии (10% первый год, 5% второй год)
      - Увеличена зависимость от эффективности маркетинга
      - Настроены различные уровни эффективности маркетинга для каждого сценария
    
    #### Базовые параметры и их настройка
    - Основные параметры:
      - Начальное количество пользователей
      - Темп роста 1й год
      - Темп роста 2й год
      - Средний чек
      - Процент кэшбэка (15%)
      - Процент использования баллов (70%)
    
    - Маркетинговые параметры:
      - Затраты на маркетинг (% от выручки)
      - Эффективность маркетинга (пользователи на 100К)
    
    > **Примечание**: 
    > - Все параметры модели можно настроить в разделе Parameter Management
    > - Поддерживается создание пользовательских сценариев с уникальными значениями параметров
    > - Изменения сохраняются и доступны для сравнения в разделе Scenario Analysis
    > 
    > **Известные проблемы**:
    > - При изменении параметров в разделе Parameter Management может пропадать кнопка сохранения сценария
    > - Возможны несоответствия значений параметров между главной страницей и разделом Parameter Management
    > - Требуется доработка механизма сохранения и загрузки пользовательских сценариев
    """)

if __name__ == "__main__":
    documentation_page()